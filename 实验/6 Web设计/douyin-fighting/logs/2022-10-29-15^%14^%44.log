Global
Viper

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.139ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.476ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:54
[1.274ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'users' AND table_type = 'BASE TABLE'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.082ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.289ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.484ms] [rows:-] SELECT * FROM `users` LIMIT 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.975ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'users' ORDER BY ORDINAL_POSITION

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.179ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.865ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.244ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'videos' AND table_type = 'BASE TABLE'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.120ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.230ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.204ms] [rows:-] SELECT * FROM `videos` LIMIT 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.410ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'videos' ORDER BY ORDINAL_POSITION

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.119ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.272ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.222ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_author_id'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.093ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.843ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.235ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_created_at'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.119ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.343ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.177ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'favorites' AND table_type = 'BASE TABLE'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.058ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.199ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.153ms] [rows:-] SELECT * FROM `favorites` LIMIT 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[1.085ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'favorites' ORDER BY ORDINAL_POSITION

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.065ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.218ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.470ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_01'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.062ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.931ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.188ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_02'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.142ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.215ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.163ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'comments' AND table_type = 'BASE TABLE'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.056ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.192ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.158ms] [rows:-] SELECT * FROM `comments` LIMIT 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.377ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'comments' ORDER BY ORDINAL_POSITION

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.065ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.231ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[3.012ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'comments' AND index_name = 'video_user'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.079ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.237ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.172ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'follows' AND table_type = 'BASE TABLE'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.055ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.196ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.161ms] [rows:-] SELECT * FROM `follows` LIMIT 1

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[1.465ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'follows' ORDER BY ORDINAL_POSITION

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.082ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.321ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.862ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_02'

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.112ms] [rows:-] SELECT DATABASE()

2022/10/29 15:14:44 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.258ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:14:44 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.188ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_01'
MySQL
Redis
1111111111111111111
0.0.0.0:8080Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
Video:23467265047416193 : in redis
Video:23466359480405377 : in redis
Video:23465876514688385 : in redis
Video:23465809741368705 : in redis

2022/10/29 15:14:49 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:261
[0.571ms] [rows:5] SELECT * FROM `videos` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321)

2022/10/29 15:14:49 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[1.490ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:14:49 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.364ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsRedis:  &[{23467265047416193 aa 23467265047416193 23467265047416193.jpg 0 0 0 2022-10-29 14:26:21.027 -0700 PDT <nil>} {23466359480405377 2 23466359480405377 23466359480405377.jpg 0 0 0 2022-10-29 14:17:21.366 -0700 PDT <nil>} {23465876514688385 aa 23465876514688385 23465876514688385.jpg 0 0 0 2022-10-29 14:12:33.385 -0700 PDT <nil>} {23465809741368705 a 23465809741368705 23465809741368705.jpg 0 0 0 2022-10-29 14:11:53.587 -0700 PDT <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
numVideos:  0
[GIN] 2022/10/29 - 15:14:49 | 500 |    7.626207ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667081690131&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs"
Feed ================
GetFeed 1
GetFeed 2
numVideos:  0
GetFeed 1
GetFeed 2
GetFeed 3
[23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
Video:23467265047416193 : in redis
Video:23466359480405377 : in redis
Video:23465876514688385 : in redis
Video:23465809741368705 : in redis

2022/10/29 15:14:50 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:261
[0.566ms] [rows:5] SELECT * FROM `videos` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321)

2022/10/29 15:14:50 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.361ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:14:50 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.461ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsRedis:  &[{23467265047416193 aa 23467265047416193 23467265047416193.jpg 0 0 0 2022-10-29 14:26:21.027 -0700 PDT <nil>} {23466359480405377 2 23466359480405377 23466359480405377.jpg 0 0 0 2022-10-29 14:17:21.366 -0700 PDT <nil>} {23465876514688385 aa 23465876514688385 23465876514688385.jpg 0 0 0 2022-10-29 14:12:33.385 -0700 PDT <nil>} {23465809741368705 a 23465809741368705 23465809741368705.jpg 0 0 0 2022-10-29 14:11:53.587 -0700 PDT <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
numVideos:  0
[GIN] 2022/10/29 - 15:14:50 | 200 |    2.963927ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=0&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs"
Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
Video:23467265047416193 : in redis
Video:23466359480405377 : in redis
Video:23465876514688385 : in redis
Video:23465809741368705 : in redis

2022/10/29 15:14:54 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:261
[0.590ms] [rows:5] SELECT * FROM `videos` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321)

2022/10/29 15:14:54 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.379ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:14:54 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.380ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsRedis:  &[{23467265047416193 aa 23467265047416193 23467265047416193.jpg 0 0 0 2022-10-29 14:26:21.027 -0700 PDT <nil>} {23466359480405377 2 23466359480405377 23466359480405377.jpg 0 0 0 2022-10-29 14:17:21.366 -0700 PDT <nil>} {23465876514688385 aa 23465876514688385 23465876514688385.jpg 0 0 0 2022-10-29 14:12:33.385 -0700 PDT <nil>} {23465809741368705 a 23465809741368705 23465809741368705.jpg 0 0 0 2022-10-29 14:11:53.587 -0700 PDT <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
numVideos:  0
[GIN] 2022/10/29 - 15:14:54 | 500 |    2.893029ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667081690679&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs"
Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
Video:23467265047416193 : in redis
Video:23466359480405377 : in redis
Video:23465876514688385 : in redis
Video:23465809741368705 : in redis

2022/10/29 15:14:57 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:261
[1.158ms] [rows:5] SELECT * FROM `videos` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321)

2022/10/29 15:14:57 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[1.179ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:14:57 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[2.122ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsRedis:  &[{23467265047416193 aa 23467265047416193 23467265047416193.jpg 0 0 0 2022-10-29 14:26:21.027 -0700 PDT <nil>} {23466359480405377 2 23466359480405377 23466359480405377.jpg 0 0 0 2022-10-29 14:17:21.366 -0700 PDT <nil>} {23465876514688385 aa 23465876514688385 23465876514688385.jpg 0 0 0 2022-10-29 14:12:33.385 -0700 PDT <nil>} {23465809741368705 a 23465809741368705 23465809741368705.jpg 0 0 0 2022-10-29 14:11:53.587 -0700 PDT <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
numVideos:  0
[GIN] 2022/10/29 - 15:14:57 | 500 |     9.88924ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667081690679&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs"
Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
Video:23467265047416193 : in redis
Video:23466359480405377 : in redis
Video:23465876514688385 : in redis
Video:23465809741368705 : in redis

2022/10/29 15:14:58 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:261
[0.484ms] [rows:5] SELECT * FROM `videos` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321)

2022/10/29 15:14:58 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.463ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:14:58 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.390ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsRedis:  &[{23467265047416193 aa 23467265047416193 23467265047416193.jpg 0 0 0 2022-10-29 14:26:21.027 -0700 PDT <nil>} {23466359480405377 2 23466359480405377 23466359480405377.jpg 0 0 0 2022-10-29 14:17:21.366 -0700 PDT <nil>} {23465876514688385 aa 23465876514688385 23465876514688385.jpg 0 0 0 2022-10-29 14:12:33.385 -0700 PDT <nil>} {23465809741368705 a 23465809741368705 23465809741368705.jpg 0 0 0 2022-10-29 14:11:53.587 -0700 PDT <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
numVideos:  0
[GIN] 2022/10/29 - 15:14:58 | 500 |    7.199174ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667081690679&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs"
Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
Video:23467265047416193 : in redis
Video:23466359480405377 : in redis
Video:23465876514688385 : in redis
Video:23465809741368705 : in redis

2022/10/29 15:15:15 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:261
[0.815ms] [rows:5] SELECT * FROM `videos` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321)

2022/10/29 15:15:15 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.682ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:15:15 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.540ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsRedis:  &[{23467265047416193 aa 23467265047416193 23467265047416193.jpg 0 0 0 2022-10-29 14:26:21.027 -0700 PDT <nil>} {23466359480405377 2 23466359480405377 23466359480405377.jpg 0 0 0 2022-10-29 14:17:21.366 -0700 PDT <nil>} {23465876514688385 aa 23465876514688385 23465876514688385.jpg 0 0 0 2022-10-29 14:12:33.385 -0700 PDT <nil>} {23465809741368705 a 23465809741368705 23465809741368705.jpg 0 0 0 2022-10-29 14:11:53.587 -0700 PDT <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23467265047416193 23466359480405377 23465876514688385 23465809741368705 23464019025218945 23462739410177409 23462573751946625 23461385153301889 23245963636264321]
numVideos:  0
[GIN] 2022/10/29 - 15:15:15 | 500 |    6.709093ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667081690679&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs"
