Global
Viper

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.086ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.386ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:54
[0.216ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'users' AND table_type = 'BASE TABLE'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.050ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.268ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.168ms] [rows:-] SELECT * FROM `users` LIMIT 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.506ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'users' ORDER BY ORDINAL_POSITION

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.107ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.287ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.196ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'videos' AND table_type = 'BASE TABLE'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.050ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.232ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.189ms] [rows:-] SELECT * FROM `videos` LIMIT 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.407ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'videos' ORDER BY ORDINAL_POSITION

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.052ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.228ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.211ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_author_id'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.046ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.206ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.160ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_created_at'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.049ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.339ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.173ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'favorites' AND table_type = 'BASE TABLE'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.045ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.208ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.156ms] [rows:-] SELECT * FROM `favorites` LIMIT 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.658ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'favorites' ORDER BY ORDINAL_POSITION

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.054ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.269ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.153ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_01'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.045ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.192ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.144ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_02'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[6.731ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.687ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.507ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'comments' AND table_type = 'BASE TABLE'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.084ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.253ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.167ms] [rows:-] SELECT * FROM `comments` LIMIT 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.521ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'comments' ORDER BY ORDINAL_POSITION

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.075ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.308ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.172ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'comments' AND index_name = 'video_user'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.085ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.472ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[1.605ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'follows' AND table_type = 'BASE TABLE'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.077ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.283ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.217ms] [rows:-] SELECT * FROM `follows` LIMIT 1

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.542ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'follows' ORDER BY ORDINAL_POSITION

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.123ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.360ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.308ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_01'

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.074ms] [rows:-] SELECT DATABASE()

2022/10/29 12:09:28 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.366ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 12:09:28 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.151ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_02'
MySQL
Redis
0.0.0.0:8080[GIN] 2022/10/29 - 12:09:32 | 200 |     609.243µs |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1Njg5OSwibmJmIjoxNjY3MDcwNDk5LCJpYXQiOjE2NjcwNzA0OTl9.VCe2QVEDDuEp8UwKw5F62jy3XFBsDkUx10OzCK7PbvM&user_id=23452498429758849"
[GIN] 2022/10/29 - 12:09:32 | 200 |     754.431µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1Njg5OSwibmJmIjoxNjY3MDcwNDk5LCJpYXQiOjE2NjcwNzA0OTl9.VCe2QVEDDuEp8UwKw5F62jy3XFBsDkUx10OzCK7PbvM&user_id=23452498429758849"

2022/10/29 12:09:42 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:232
[0.584ms] [rows:1] SELECT * FROM `videos` WHERE video_id in (23245963636264321)

2022/10/29 12:09:42 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[3.928ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 12:09:42 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.418ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23245963636264321) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 12:09:42 | 500 |    5.811763ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667070583327&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1Njg5OSwibmJmIjoxNjY3MDcwNDk5LCJpYXQiOjE2NjcwNzA0OTl9.VCe2QVEDDuEp8UwKw5F62jy3XFBsDkUx10OzCK7PbvM"
[GIN] 2022/10/29 - 12:09:48 | 200 |      744.77µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1Njg5OSwibmJmIjoxNjY3MDcwNDk5LCJpYXQiOjE2NjcwNzA0OTl9.VCe2QVEDDuEp8UwKw5F62jy3XFBsDkUx10OzCK7PbvM&user_id=23452498429758849"
[GIN] 2022/10/29 - 12:09:48 | 200 |     665.322µs |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1Njg5OSwibmJmIjoxNjY3MDcwNDk5LCJpYXQiOjE2NjcwNzA0OTl9.VCe2QVEDDuEp8UwKw5F62jy3XFBsDkUx10OzCK7PbvM&user_id=23452498429758849"

2022/10/29 12:09:50 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:232
[0.359ms] [rows:1] SELECT * FROM `videos` WHERE video_id in (23245963636264321)

2022/10/29 12:09:50 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[1.009ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 12:09:50 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.253ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23245963636264321) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 12:09:50 | 500 |    2.896624ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667070591340"

2022/10/29 12:09:58 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:28
[0.363ms] [rows:1] SELECT * FROM `users` WHERE name = '1' LIMIT 1
[GIN] 2022/10/29 - 12:09:58 | 200 |   59.367268ms |    192.168.77.1 | POST     "/douyin/user/login/?username=1&password=111111"
[GIN] 2022/10/29 - 12:09:58 | 200 |     623.483µs |    192.168.77.1 | GET      "/douyin/user/?user_id=23452498429758849&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1Njk5OCwibmJmIjoxNjY3MDcwNTk4LCJpYXQiOjE2NjcwNzA1OTh9.nvqdTQLR1M1hlgTb7EHxFW5ccSS3aF1f7xMjrVwka-Q"
[GIN] 2022/10/29 - 12:09:58 | 200 |     561.939µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1Njk5OCwibmJmIjoxNjY3MDcwNTk4LCJpYXQiOjE2NjcwNzA1OTh9.nvqdTQLR1M1hlgTb7EHxFW5ccSS3aF1f7xMjrVwka-Q&user_id=23452498429758849"
[GIN] 2022/10/29 - 12:09:58 | 200 |    1.243385ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1Njk5OCwibmJmIjoxNjY3MDcwNTk4LCJpYXQiOjE2NjcwNzA1OTh9.nvqdTQLR1M1hlgTb7EHxFW5ccSS3aF1f7xMjrVwka-Q&user_id=23452498429758849"

2022/10/29 12:10:08 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:68
[1.868ms] [rows:1] INSERT INTO `videos` (`title`,`play_name`,`cover_name`,`author_id`,`created_at`,`ext_info`,`video_id`) VALUES ('aa','23453554370956673.mp4','23453554370956673.jpg',23452498429758849,'2022-10-29 12:10:08.815',NULL,23453554370956673)

2022/10/29 12:10:08 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:80
[0.281ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 23452498429758849
[GIN] 2022/10/29 - 12:10:08 | 500 |   53.058544ms |    192.168.77.1 | POST     "/douyin/publish/action/"
