Global
Viper

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.162ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[1.996ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:54
[0.512ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'users' AND table_type = 'BASE TABLE'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.245ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.590ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[2.573ms] [rows:-] SELECT * FROM `users` LIMIT 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[1.051ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'users' ORDER BY ORDINAL_POSITION

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.139ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.904ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.281ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'videos' AND table_type = 'BASE TABLE'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.079ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.300ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[2.747ms] [rows:-] SELECT * FROM `videos` LIMIT 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.416ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'videos' ORDER BY ORDINAL_POSITION

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.106ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.334ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[3.316ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_author_id'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[2.157ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.662ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[1.928ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_created_at'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.190ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.576ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.384ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'favorites' AND table_type = 'BASE TABLE'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.148ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[1.056ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[5.390ms] [rows:-] SELECT * FROM `favorites` LIMIT 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.714ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'favorites' ORDER BY ORDINAL_POSITION

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.189ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[1.682ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[3.548ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_01'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.118ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.299ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[2.976ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_02'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.068ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.238ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.883ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'comments' AND table_type = 'BASE TABLE'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.049ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.205ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.155ms] [rows:-] SELECT * FROM `comments` LIMIT 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.814ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'comments' ORDER BY ORDINAL_POSITION

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.135ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.938ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.173ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'comments' AND index_name = 'video_user'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.058ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.350ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.184ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'follows' AND table_type = 'BASE TABLE'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.049ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.272ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.254ms] [rows:-] SELECT * FROM `follows` LIMIT 1

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.879ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'follows' ORDER BY ORDINAL_POSITION

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.063ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.280ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.798ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_01'

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[2.056ms] [rows:-] SELECT DATABASE()

2022/10/29 14:27:52 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.258ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 14:27:52 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.252ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_02'
MySQL
Redis
1111111111111111111
0.0.0.0:8080[GIN] 2022/10/29 - 14:27:56 | 200 |      440.05µs |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTE3MiwibmJmIjoxNjY3MDc4NzcyLCJpYXQiOjE2NjcwNzg3NzJ9.QxMvPLtYiWy-XEs9xyFbEJMbR5iI7Vx70ppSRI-4-bs&user_id=23467250518347137"
[GIN] 2022/10/29 - 14:27:56 | 200 |     364.677µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTE3MiwibmJmIjoxNjY3MDc4NzcyLCJpYXQiOjE2NjcwNzg3NzJ9.QxMvPLtYiWy-XEs9xyFbEJMbR5iI7Vx70ppSRI-4-bs&user_id=23467250518347137"
Feed ================

2022/10/29 14:28:03 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[0.392ms] [rows:5] SELECT * FROM `videos` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321)

2022/10/29 14:28:03 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.542ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 14:28:03 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.849ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
numVideos:  0
[GIN] 2022/10/29 - 14:28:03 | 500 |     3.31799ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667078883566"

2022/10/29 14:28:09 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:28
[0.354ms] [rows:1] SELECT * FROM `users` WHERE name = '3' LIMIT 1
[GIN] 2022/10/29 - 14:28:09 | 200 |   56.810366ms |    192.168.77.1 | POST     "/douyin/user/login/?username=3&password=333333"
[GIN] 2022/10/29 - 14:28:09 | 200 |     203.521µs |    192.168.77.1 | GET      "/douyin/user/?user_id=23467250518347137&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs"
[GIN] 2022/10/29 - 14:28:09 | 200 |     327.548µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs&user_id=23467250518347137"
[GIN] 2022/10/29 - 14:28:09 | 200 |     154.361µs |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs&user_id=23467250518347137"
Feed ================
numVideos:  0

2022/10/29 14:28:15 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[1.041ms] [rows:5] SELECT * FROM `videos` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321)

2022/10/29 14:28:15 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.332ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 14:28:15 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.279ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23464019025218945,23462739410177409,23462573751946625,23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 14:28:15 | 200 |    3.240203ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=0&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDY3MjUwNTE4MzQ3MTM3LCJOYW1lIjoiMyIsImV4cCI6MTY2NzE2NTI4OSwibmJmIjoxNjY3MDc4ODg5LCJpYXQiOjE2NjcwNzg4ODl9.0B3EsW5zi93QaCi0hS7y92-sRB1S5FM5A5raASf7dTs"
