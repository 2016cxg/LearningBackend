Global
Viper

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.079ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.561ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:54
[1.736ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'users' AND table_type = 'BASE TABLE'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.398ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[2.245ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.343ms] [rows:-] SELECT * FROM `users` LIMIT 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[1.427ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'users' ORDER BY ORDINAL_POSITION

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.188ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.559ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.487ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'videos' AND table_type = 'BASE TABLE'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.148ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.559ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.003ms] [rows:-] SELECT * FROM `videos` LIMIT 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.599ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'videos' ORDER BY ORDINAL_POSITION

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.141ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[1.814ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.359ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_author_id'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.108ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.488ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.401ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_created_at'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.146ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.475ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.399ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'favorites' AND table_type = 'BASE TABLE'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.142ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.406ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.245ms] [rows:-] SELECT * FROM `favorites` LIMIT 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[1.082ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'favorites' ORDER BY ORDINAL_POSITION

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[1.155ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[1.062ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.962ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_01'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.160ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.699ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.342ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_02'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.186ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.480ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.677ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'comments' AND table_type = 'BASE TABLE'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.109ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.404ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.222ms] [rows:-] SELECT * FROM `comments` LIMIT 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.734ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'comments' ORDER BY ORDINAL_POSITION

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.139ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.516ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.896ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'comments' AND index_name = 'video_user'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.167ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.486ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.834ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'follows' AND table_type = 'BASE TABLE'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.155ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.579ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.280ms] [rows:-] SELECT * FROM `follows` LIMIT 1

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.649ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'follows' ORDER BY ORDINAL_POSITION

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.184ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.550ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.396ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_01'

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.132ms] [rows:-] SELECT DATABASE()

2022/10/29 16:07:07 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.916ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 16:07:07 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[2.200ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_02'
MySQL
Redis
1111111111111111111
0.0.0.0:8080
2022/10/29 16:07:10 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:16
[0.738ms] [rows:1] INSERT INTO `comments` (`video_id`,`user_id`,`content`,`created_at`,`deleted_at`,`comment_id`) VALUES (23473691677445505,0,'aaaasdf','2022-10-29 16:07:10.37',NULL,23477414256463233)

2022/10/29 16:07:10 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.482ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:10 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[0.437ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:10 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.359ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:10 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[0.561ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:10 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.362ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0
[GIN] 2022/10/29 - 16:07:10 | 500 |      7.1695ms |    192.168.77.1 | POST     "/douyin/comment/action/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&video_id=23473691677445505&action_type=1&comment_text=aaaasdf"
Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23476001883311489 23474693730225537 23474522149637505 23474442524970369 23473691677445505]
Video:23476001883311489 : in redis
Video:23474693730225537 : in redis
Video:23474522149637505 : in redis
Video:23474442524970369 : in redis
Video:23473691677445505 : in redis
GetVideoListByIDsRedis: later
GetFeed 4
GetFeed 5

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:92
[1.950ms] [rows:0] SELECT * FROM `users` WHERE user_id in (0,0,0,0,0)
numVideos:  5
log: 
logged
[GIN] 2022/10/29 - 16:07:18 | 200 |    3.286658ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667084838608&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY"
Video:23473691677445505 : in redis
Video:23474442524970369 : in redis
Video:23474522149637505 : in redis
GetVideoListByIDsRedis: later

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.357ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[0.258ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.215ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[0.221ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.785ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.461ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1
Video:23473691677445505 : in redis

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[4.015ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true
Video:23476001883311489 : in redis

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.538ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true
Video:23474442524970369 : in redis
Video:23474693730225537 : in redis
Video:23474522149637505 : in redis
Video:23474522149637505 : in redis
GetVideoListByIDsRedis: later
Video:23474442524970369 : in redis
Video:23476001883311489 : in redis
Video:23473691677445505 : in redis
Video:23474693730225537 : in redis
GetVideoListByIDsRedis: later
len videoList:  &[{23476001883311489 aaa 23476001883311489 23476001883311489.jpg 0 0 0 2022-10-29 15:53:08.697 -0700 PDT <nil>} {23474693730225537 aa 23474693730225537 23474693730225537.jpg 0 0 0 2022-10-29 15:40:08.863 -0700 PDT <nil>} {23474522149637505 bb 23474522149637505 23474522149637505.jpg 1 0 0 2022-10-29 15:38:26.67 -0700 PDT <nil>} {23474442524970369 a 23474442524970369 23474442524970369.jpg 1 0 0 2022-10-29 15:37:39.208 -0700 PDT <nil>} {23473691677445505 a 23473691677445505 23473691677445505.jpg 1 9 0 2022-10-29 15:30:11.704 -0700 PDT <nil>}]
Video:23474522149637505 : in redis
Video:23474442524970369 : in redis
Video:23473691677445505 : in redis
GetVideoListByIDsRedis: later
len videoList:  &[{23476001883311489 aaa 23476001883311489 23476001883311489.jpg 0 0 0 2022-10-29 15:53:08.697 -0700 PDT <nil>} {23474693730225537 aa 23474693730225537 23474693730225537.jpg 0 0 0 2022-10-29 15:40:08.863 -0700 PDT <nil>} {23474522149637505 bb 23474522149637505 23474522149637505.jpg 1 0 0 2022-10-29 15:38:26.67 -0700 PDT <nil>} {23474442524970369 a 23474442524970369 23474442524970369.jpg 1 0 0 2022-10-29 15:37:39.208 -0700 PDT <nil>} {23473691677445505 a 23473691677445505 23473691677445505.jpg 1 9 0 2022-10-29 15:30:11.704 -0700 PDT <nil>}]

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[6.309ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[2.575ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[3.972ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[8.630ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[1.435ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[3.710ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[2.917ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[2.735ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[18.497ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[32.591ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.573ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[2.020ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true
[GIN] 2022/10/29 - 16:07:18 | 500 |   41.807179ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&user_id=0"

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[3.088ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true
[GIN] 2022/10/29 - 16:07:18 | 200 |    27.56197ms |    192.168.77.1 | GET      "/static/video/23476001883311489"

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[7.218ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[43.380ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[10.582ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[2.298ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[4.572ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[1.163ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[2.390ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true
[GIN] 2022/10/29 - 16:07:18 | 500 |    67.08625ms |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&user_id=0"

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[1.070ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[1.386ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[2.465ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[4.333ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0
[GIN] 2022/10/29 - 16:07:18 | 500 |   61.909872ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&user_id=0"

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[3.461ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[0.553ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.922ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.304ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[4.213ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.617ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[1.433ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:18 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[2.445ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0
[GIN] 2022/10/29 - 16:07:18 | 500 |    85.18554ms |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&user_id=0"
GetVideoListByIDsRedis: later
[GIN] 2022/10/29 - 16:07:19 | 200 |      495.56µs |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&user_id=23473621196361089"
[GIN] 2022/10/29 - 16:07:19 | 200 |     723.513µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&user_id=23473621196361089"
Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23476001883311489 23474693730225537 23474522149637505 23474442524970369 23473691677445505]
Video:23476001883311489 : in redis
Video:23474693730225537 : in redis
Video:23474522149637505 : in redis
Video:23474442524970369 : in redis
Video:23473691677445505 : in redis
GetVideoListByIDsRedis: later
GetFeed 4
GetFeed 5

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:92
[0.634ms] [rows:0] SELECT * FROM `users` WHERE user_id in (0,0,0,0,0)
numVideos:  5
log: 
logged
[GIN] 2022/10/29 - 16:07:25 | 200 |    5.466506ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667084845978&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY"
Video:23476001883311489 : in redis
Video:23474693730225537 : in redis
Video:23474522149637505 : in redis
Video:23474442524970369 : in redis
Video:23473691677445505 : in redis
GetVideoListByIDsRedis: later
len videoList:  &[{23476001883311489 aaa 23476001883311489 23476001883311489.jpg 0 0 0 2022-10-29 15:53:08.697 -0700 PDT <nil>} {23474693730225537 aa 23474693730225537 23474693730225537.jpg 0 0 0 2022-10-29 15:40:08.863 -0700 PDT <nil>} {23474522149637505 bb 23474522149637505 23474522149637505.jpg 1 0 0 2022-10-29 15:38:26.67 -0700 PDT <nil>} {23474442524970369 a 23474442524970369 23474442524970369.jpg 1 0 0 2022-10-29 15:37:39.208 -0700 PDT <nil>} {23473691677445505 a 23473691677445505 23473691677445505.jpg 1 9 0 2022-10-29 15:30:11.704 -0700 PDT <nil>}]

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.954ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[0.307ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.243ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true
Video:23473691677445505 : in redis
Video:23474442524970369 : in redis
Video:23474522149637505 : in redis
GetVideoListByIDsRedis: later

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.321ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[1.226ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[0.505ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.477ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0
[GIN] 2022/10/29 - 16:07:25 | 500 |    4.592305ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&user_id=0"

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.747ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[0.343ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.292ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.588ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[0.238ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.182ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[0.172ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.235ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.875ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[0.252ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.547ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[0.273ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:25 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.224ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0
[GIN] 2022/10/29 - 16:07:25 | 500 |   11.851067ms |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&user_id=0"
[GIN] 2022/10/29 - 16:07:25 | 200 |     1.59645ms |    192.168.77.1 | GET      "/static/video/23476001883311489"
[GIN] 2022/10/29 - 16:07:28 | 200 |     345.649µs |    192.168.77.1 | GET      "/douyin/comment/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&video_id=23476001883311489"

2022/10/29 16:07:31 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:16
[1.750ms] [rows:1] INSERT INTO `comments` (`video_id`,`user_id`,`content`,`created_at`,`deleted_at`,`comment_id`) VALUES (23476001883311489,0,'aaa','2022-10-29 16:07:31.24',NULL,23477449270513025)

2022/10/29 16:07:31 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:51
[0.409ms] [rows:0] SELECT * FROM `users` WHERE user_id = 0 LIMIT 1

2022/10/29 16:07:31 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:54
[0.753ms] [rows:1] SELECT count(*) FROM `follows` WHERE follower_id = 0 and is_follow = true

2022/10/29 16:07:31 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:57
[0.420ms] [rows:1] SELECT count(*) FROM `follows` WHERE celebrity_id = 0 and is_follow = true

2022/10/29 16:07:31 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:60
[0.299ms] [rows:1] SELECT count(*) FROM `favorites` WHERE user_id = 0 and is_favorite = true

2022/10/29 16:07:31 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:321
[0.403ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0
[GIN] 2022/10/29 - 16:07:31 | 500 |    6.305127ms |    192.168.77.1 | POST     "/douyin/comment/action/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MTA3NiwibmJmIjoxNjY3MDg0Njc2LCJpYXQiOjE2NjcwODQ2NzZ9.Bvzk3hGOPlB_hlXJtWmfpLzZVHkD6yDGJKz2CFcBtCY&video_id=23476001883311489&action_type=1&comment_text=aaa"
