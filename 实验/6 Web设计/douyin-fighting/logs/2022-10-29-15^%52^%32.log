Global
Viper

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.156ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.976ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:54
[0.208ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'users' AND table_type = 'BASE TABLE'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.053ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.718ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.055ms] [rows:-] SELECT * FROM `users` LIMIT 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.434ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'users' ORDER BY ORDINAL_POSITION

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.068ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.220ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.732ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'videos' AND table_type = 'BASE TABLE'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.049ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.203ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.278ms] [rows:-] SELECT * FROM `videos` LIMIT 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[1.021ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'videos' ORDER BY ORDINAL_POSITION

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.053ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.212ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.191ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_author_id'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.046ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.935ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.154ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_created_at'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.050ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.891ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.157ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'favorites' AND table_type = 'BASE TABLE'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.046ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.245ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.544ms] [rows:-] SELECT * FROM `favorites` LIMIT 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.355ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'favorites' ORDER BY ORDINAL_POSITION

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.051ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.205ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.991ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_01'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.050ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.207ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.185ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_02'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.054ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.197ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.152ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'comments' AND table_type = 'BASE TABLE'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.044ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.793ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[0.679ms] [rows:-] SELECT * FROM `comments` LIMIT 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.759ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'comments' ORDER BY ORDINAL_POSITION

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.080ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.282ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.173ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'comments' AND index_name = 'video_user'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.050ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.196ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.542ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'follows' AND table_type = 'BASE TABLE'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.048ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.197ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.003ms] [rows:-] SELECT * FROM `follows` LIMIT 1

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[1.309ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'follows' ORDER BY ORDINAL_POSITION

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.069ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.247ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.165ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_01'

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.048ms] [rows:-] SELECT DATABASE()

2022/10/29 15:52:32 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.852ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 15:52:32 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.182ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_02'
MySQL
Redis
1111111111111111111
0.0.0.0:8080Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23474693730225537 23474522149637505 23474442524970369 23473691677445505]
GetVideoListByIDsRedis: later

2022/10/29 15:52:39 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:268
[0.441ms] [rows:4] SELECT * FROM `videos` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505)
result:  &{0xc000168f30 <nil> 4 0xc0003cc380 0}

2022/10/29 15:52:39 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.384ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:52:39 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.382ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsSql: 
GetVideoListByIDsRedis:  &[{0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23474693730225537 23474522149637505 23474442524970369 23473691677445505]
numVideos:  0
[GIN] 2022/10/29 - 15:52:39 | 500 |    2.812942ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667083959738&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE2OTg5MCwibmJmIjoxNjY3MDgzNDkwLCJpYXQiOjE2NjcwODM0OTB9.uwUFCMuKyrfm2_fa957QRejHBVLMdxnH_6xXBifB7bc"
[GIN] 2022/10/29 - 15:52:45 | 200 |     615.193µs |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE2OTg5MCwibmJmIjoxNjY3MDgzNDkwLCJpYXQiOjE2NjcwODM0OTB9.uwUFCMuKyrfm2_fa957QRejHBVLMdxnH_6xXBifB7bc&user_id=23473621196361089"
GetVideoListByIDsRedis: later
[GIN] 2022/10/29 - 15:52:45 | 200 |    1.226577ms |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE2OTg5MCwibmJmIjoxNjY3MDgzNDkwLCJpYXQiOjE2NjcwODM0OTB9.uwUFCMuKyrfm2_fa957QRejHBVLMdxnH_6xXBifB7bc&user_id=23473621196361089"
Feed ================
GetFeed 1
GetFeed 2
GetFeed 3
[23474693730225537 23474522149637505 23474442524970369 23473691677445505]
GetVideoListByIDsRedis: later

2022/10/29 15:52:51 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:268
[1.470ms] [rows:4] SELECT * FROM `videos` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505)
result:  &{0xc000168f30 <nil> 4 0xc000098380 0}

2022/10/29 15:52:51 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.639ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:52:51 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.715ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsSql: 
GetVideoListByIDsRedis:  &[{0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23474693730225537 23474522149637505 23474442524970369 23473691677445505]
numVideos:  0
[GIN] 2022/10/29 - 15:52:51 | 500 |    4.308431ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667083972038"

2022/10/29 15:52:56 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:28
[0.457ms] [rows:1] SELECT * FROM `users` WHERE name = '1' LIMIT 1
[GIN] 2022/10/29 - 15:52:56 | 200 |   56.628283ms |    192.168.77.1 | POST     "/douyin/user/login/?username=1&password=111111"
[GIN] 2022/10/29 - 15:52:56 | 200 |     339.973µs |    192.168.77.1 | GET      "/douyin/user/?user_id=23473621196361089&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MDM3NiwibmJmIjoxNjY3MDgzOTc2LCJpYXQiOjE2NjcwODM5NzZ9.6ENgvIUxDXJzIig2kXXzWf-NPVtKiheZC-q_rMEB-rA"
[GIN] 2022/10/29 - 15:52:56 | 200 |      212.33µs |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MDM3NiwibmJmIjoxNjY3MDgzOTc2LCJpYXQiOjE2NjcwODM5NzZ9.6ENgvIUxDXJzIig2kXXzWf-NPVtKiheZC-q_rMEB-rA&user_id=23473621196361089"
GetVideoListByIDsRedis: later
[GIN] 2022/10/29 - 15:52:56 | 200 |     775.485µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MDM3NiwibmJmIjoxNjY3MDgzOTc2LCJpYXQiOjE2NjcwODM5NzZ9.6ENgvIUxDXJzIig2kXXzWf-NPVtKiheZC-q_rMEB-rA&user_id=23473621196361089"
publish 1111111111111111111
publish 2222222222222
publish 3333333333333
insert db

2022/10/29 15:53:08 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:84
[1.447ms] [rows:1] INSERT INTO `videos` (`title`,`play_name`,`cover_name`,`author_id`,`created_at`,`ext_info`,`video_id`) VALUES ('aaa','23476001883311489','23476001883311489.jpg',0,'2022-10-29 15:53:08.697',NULL,23476001883311489)
redis
redis 1

2022/10/29 15:53:08 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:102
[0.808ms] [rows:5] SELECT * FROM `videos` WHERE author_id = 0
redis 2
redis 3
pipe 
pipe 1
pipe 2
pipe 3
pipe 4
[GIN] 2022/10/29 - 15:53:08 | 200 |  173.465165ms |    192.168.77.1 | POST     "/douyin/publish/action/"
GetVideoListByIDsRedis: later
[GIN] 2022/10/29 - 15:53:09 | 200 |     725.907µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MDM3NiwibmJmIjoxNjY3MDgzOTc2LCJpYXQiOjE2NjcwODM5NzZ9.6ENgvIUxDXJzIig2kXXzWf-NPVtKiheZC-q_rMEB-rA&user_id=23473621196361089"
[GIN] 2022/10/29 - 15:53:09 | 200 |     818.492µs |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MDM3NiwibmJmIjoxNjY3MDgzOTc2LCJpYXQiOjE2NjcwODM5NzZ9.6ENgvIUxDXJzIig2kXXzWf-NPVtKiheZC-q_rMEB-rA&user_id=23473621196361089"
Feed ================
GetFeed 1
GetFeed 2
numVideos:  0
GetFeed 1
GetFeed 2
GetFeed 3
[23476001883311489 23474693730225537 23474522149637505 23474442524970369 23473691677445505]
Video:23476001883311489 : in redis
GetVideoListByIDsRedis: later

2022/10/29 15:53:14 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:268
[0.438ms] [rows:4] SELECT * FROM `videos` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505)
result:  &{0xc000168f30 <nil> 4 0xc000098e00 0}

2022/10/29 15:53:14 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.926ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 15:53:14 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.201ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23474693730225537,23474522149637505,23474442524970369,23473691677445505) and is_favorite = true GROUP BY `video_id`
GetVideoListByIDsSql: 
GetVideoListByIDsRedis:  &[{23476001883311489 aaa 23476001883311489 23476001883311489.jpg 0 0 0 2022-10-29 15:53:08.697 -0700 PDT <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>} {0    0 0 0 0001-01-01 00:00:00 +0000 UTC <nil>}]  
 [23476001883311489 23474693730225537 23474522149637505 23474442524970369 23473691677445505]
numVideos:  0
[GIN] 2022/10/29 - 15:53:14 | 200 |    2.475304ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=0&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDczNjIxMTk2MzYxMDg5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE3MDM3NiwibmJmIjoxNjY3MDgzOTc2LCJpYXQiOjE2NjcwODM5NzZ9.6ENgvIUxDXJzIig2kXXzWf-NPVtKiheZC-q_rMEB-rA"
