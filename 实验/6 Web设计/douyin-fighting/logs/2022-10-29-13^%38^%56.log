Global
Viper

2022/10/29 13:38:56 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.326ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:56 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[1.657ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:54
[0.400ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'users' AND table_type = 'BASE TABLE'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.065ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[3.036ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.777ms] [rows:-] SELECT * FROM `users` LIMIT 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.570ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'users' ORDER BY ORDINAL_POSITION

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.127ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.993ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.596ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'videos' AND table_type = 'BASE TABLE'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.110ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.304ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.585ms] [rows:-] SELECT * FROM `videos` LIMIT 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.994ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'videos' ORDER BY ORDINAL_POSITION

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.074ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.377ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.240ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_author_id'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.098ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.856ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:55
[0.220ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'videos' AND index_name = 'idx_videos_created_at'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.060ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.270ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.212ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'favorites' AND table_type = 'BASE TABLE'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.115ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.292ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.126ms] [rows:-] SELECT * FROM `favorites` LIMIT 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.484ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'favorites' ORDER BY ORDINAL_POSITION

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.059ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.270ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.612ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_01'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.827ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.608ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:56
[0.196ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'favorites' AND index_name = 'idx_02'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.058ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.857ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.154ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'comments' AND table_type = 'BASE TABLE'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.044ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[5.959ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.750ms] [rows:-] SELECT * FROM `comments` LIMIT 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.566ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'comments' ORDER BY ORDINAL_POSITION

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.088ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.873ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:57
[0.274ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'comments' AND index_name = 'video_user'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.080ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.328ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.832ms] [rows:-] SELECT count(*) FROM information_schema.tables WHERE table_schema = 'douyin' AND table_name = 'follows' AND table_type = 'BASE TABLE'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.138ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.614ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:148
[1.357ms] [rows:-] SELECT * FROM `follows` LIMIT 1

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:166
[0.507ms] [rows:-] SELECT column_name, column_default, is_nullable = 'YES', data_type, character_maximum_length, column_type, column_key, extra, column_comment, numeric_precision, numeric_scale , datetime_precision FROM information_schema.columns WHERE table_schema = 'douyin' AND table_name = 'follows' ORDER BY ORDINAL_POSITION

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.146ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.550ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.320ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_01'

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:228
[0.137ms] [rows:-] SELECT DATABASE()

2022/10/29 13:38:57 /data/go/pkg/mod/gorm.io/driver/mysql@v1.3.3/migrator.go:231
[0.553ms] [rows:1] SELECT SCHEMA_NAME from Information_schema.SCHEMATA where SCHEMA_NAME LIKE 'douyin%' ORDER BY SCHEMA_NAME='douyin' DESC limit 1

2022/10/29 13:38:57 /home/cheng/Desktop/Linux/douyin-fighting/initialize/mysql.go:58
[0.380ms] [rows:-] SELECT count(*) FROM information_schema.statistics WHERE table_schema = 'douyin' AND table_name = 'follows' AND index_name = 'idx_02'
MySQL
Redis
1111111111111111111
0.0.0.0:8080
2022/10/29 13:39:01 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[0.552ms] [rows:7] SELECT * FROM `videos` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457)

2022/10/29 13:39:01 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[1.707ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 13:39:01 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[1.033ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:01 | 500 |    5.214458ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40&user_id=23452498429758849"

2022/10/29 13:39:01 /home/cheng/Desktop/Linux/douyin-fighting/service/follow.go:105
[11.117ms] [rows:0] SELECT `celebrity_id`,`is_follow` FROM `follows` WHERE follower_id = 23452498429758849
[GIN] 2022/10/29 - 13:39:01 | 200 |   12.211671ms |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40&user_id=23452498429758849"

2022/10/29 13:39:06 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[3.049ms] [rows:2] SELECT * FROM `videos` WHERE video_id in (23461385153301889,23245963636264321)

2022/10/29 13:39:06 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[1.958ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 13:39:06 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.404ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:06 | 500 |    6.809553ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667075946492&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40"
[GIN] 2022/10/29 - 13:39:09 | 200 |     892.582µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40&user_id=23452498429758849"

2022/10/29 13:39:09 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[3.535ms] [rows:7] SELECT * FROM `videos` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457)

2022/10/29 13:39:09 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[1.592ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 13:39:09 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[2.583ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:09 | 500 |   13.281778ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40&user_id=23452498429758849"
[GIN] 2022/10/29 - 13:39:15 | 200 |     413.295µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40&user_id=23452498429758849"

2022/10/29 13:39:15 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[1.458ms] [rows:7] SELECT * FROM `videos` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457)

2022/10/29 13:39:15 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.892ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 13:39:15 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.803ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:15 | 500 |    9.677696ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40&user_id=23452498429758849"

2022/10/29 13:39:22 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[1.416ms] [rows:2] SELECT * FROM `videos` WHERE video_id in (23461385153301889,23245963636264321)

2022/10/29 13:39:22 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[4.622ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 13:39:22 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[2.723ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:22 | 500 |    9.864297ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667075962951&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40"

2022/10/29 13:39:25 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[0.434ms] [rows:7] SELECT * FROM `videos` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457)

2022/10/29 13:39:25 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[0.938ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:25 | 200 |     257.862µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40&user_id=23452498429758849"

2022/10/29 13:39:25 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[1.213ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:25 | 500 |    6.530746ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE1OTExMCwibmJmIjoxNjY3MDcyNzEwLCJpYXQiOjE2NjcwNzI3MTB9.2qrTeSnZzPnomCtFE34WphwXRkJq8DDl6WXtazfYo40&user_id=23452498429758849"

2022/10/29 13:39:30 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[0.571ms] [rows:2] SELECT * FROM `videos` WHERE video_id in (23461385153301889,23245963636264321)

2022/10/29 13:39:30 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[1.038ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23461385153301889,23245963636264321) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 13:39:30 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.453ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23461385153301889,23245963636264321) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:30 | 500 |    2.864867ms |    192.168.77.1 | GET      "/douyin/feed/?latest_time=1667075971047"

2022/10/29 13:39:35 /home/cheng/Desktop/Linux/douyin-fighting/service/user.go:28
[1.776ms] [rows:1] SELECT * FROM `users` WHERE name = '1' LIMIT 1
[GIN] 2022/10/29 - 13:39:35 | 200 |   59.587641ms |    192.168.77.1 | POST     "/douyin/user/login/?username=1&password=111111"

2022/10/29 13:39:35 /home/cheng/Desktop/Linux/douyin-fighting/service/follow.go:20
[0.287ms] [rows:0] SELECT `celebrity_id`,`is_follow` FROM `follows` WHERE follower_id = 0
[GIN] 2022/10/29 - 13:39:35 | 200 |    1.219791ms |    192.168.77.1 | GET      "/douyin/user/?user_id=23452498429758849&token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE2MjM3NSwibmJmIjoxNjY3MDc1OTc1LCJpYXQiOjE2NjcwNzU5NzV9.F2evzEjkR8YpG9M2aZ58rhUZUgQCs35gx7ZE4XRjBX8"
[GIN] 2022/10/29 - 13:39:35 | 200 |      677.99µs |    192.168.77.1 | GET      "/douyin/favorite/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE2MjM3NSwibmJmIjoxNjY3MDc1OTc1LCJpYXQiOjE2NjcwNzU5NzV9.F2evzEjkR8YpG9M2aZ58rhUZUgQCs35gx7ZE4XRjBX8&user_id=23452498429758849"

2022/10/29 13:39:35 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:243
[1.319ms] [rows:7] SELECT * FROM `videos` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457)

2022/10/29 13:39:35 /home/cheng/Desktop/Linux/douyin-fighting/service/comment.go:209
[1.223ms] [rows:0] SELECT `video_id`,COUNT(video_id) as comment_count FROM `comments` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) AND `comments`.`deleted_at` IS NULL GROUP BY `video_id`

2022/10/29 13:39:36 /home/cheng/Desktop/Linux/douyin-fighting/service/favorite.go:178
[0.413ms] [rows:0] SELECT `video_id`,COUNT(video_id) as favorite_count FROM `favorites` WHERE video_id in (23453787305823617,23453727427939713,23453554370956673,23453395339726209,23452935241354625,23452930409516417,23452612732931457) and is_favorite = true GROUP BY `video_id`
[GIN] 2022/10/29 - 13:39:36 | 500 |    8.217988ms |    192.168.77.1 | GET      "/douyin/publish/list/?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySUQiOjIzNDUyNDk4NDI5NzU4ODQ5LCJOYW1lIjoiMSIsImV4cCI6MTY2NzE2MjM3NSwibmJmIjoxNjY3MDc1OTc1LCJpYXQiOjE2NjcwNzU5NzV9.F2evzEjkR8YpG9M2aZ58rhUZUgQCs35gx7ZE4XRjBX8&user_id=23452498429758849"
publish 1111111111111111111
publish 2222222222222
publish 3333333333333
insert db

2022/10/29 13:39:44 /home/cheng/Desktop/Linux/douyin-fighting/service/video.go:70
[2.360ms] [rows:1] INSERT INTO `videos` (`title`,`play_name`,`cover_name`,`author_id`,`created_at`,`ext_info`,`video_id`) VALUES ('a','23462573751946625','23462573751946625.jpg',0,'2022-10-29 13:39:44.894',NULL,23462573751946625)
redis
redis 1
redis 4
pipe 
pipe 1
pipe 2
pipe 3
pipe 4
cannot written to db
ERR wrong number of arguments for 'hset' command
[GIN] 2022/10/29 - 13:39:44 | 500 |  161.458451ms |    192.168.77.1 | POST     "/douyin/publish/action/"
